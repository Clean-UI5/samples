<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>Special Instructions</title>
    <script src="https://ui5.sap.com/resources/sap-ui-core.js"
      id="sap-ui-bootstrap"
      data-sap-ui-libs="sap.m,sap.ui.layout"
      data-sap-ui-theme="sap_fiori_3"
      data-sap-ui-async="true"
      data-sap-ui-compatVersion ="edge"
      data-sap-ui-resourceroots='{"myApp": "./"}'
    ></script>
  </head>
  <body id="content" class="sapUiBody">
  </body>
  <script language="JavaScript">
sap.ui.require([
  'sap/ui/core/Fragment',
  'sap/ui/model/json/JSONModel'
], async function (Fragment, JSONModel) {

  function xfrag (xmlContent) {
    return Fragment.load({
      type: 'XML',
      definition: `
<core:FragmentDefinition
  xmlns:core="sap.ui.core"
>
  ${xmlContent}
</core:FragmentDefinition>`
    });
  }

  sap.ui.define([
    'sap/ui/core/mvc/Controller'
  ], function (Controller) {

      return Controller.extend('MyApp.controller.Control', {
          onPress: function () {
              alert('KIKOU!')
          }
      })

  });

  sap.ui.require.preload({
    'myApp/view/control.view.xml': `
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:m="sap.m"
  controllerName="MyApp.controller.Control"
>
  <m:Button text="Control" id="test" press="onPress" />
</mvc:View>
`
  });

  const view = await xfrag`
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:m="sap.m"
  xmlns:f="sap.ui.layout.form"
  xmlns:core="sap.ui.core"
>
  <mvc:content>
    <m:VBox
      class="sapUiLargeMargin"
    >
      <f:SimpleForm
        layout="ResponsiveGridLayout"
        labelSpanXL="3"
        labelSpanL="3"
        labelSpanM="3"
        labelSpanS="12"
        adjustLabelSpan="false"
        emptySpanXL="4"
        emptySpanL="4"
        emptySpanM="4"
        emptySpanS="0"
        columnsXL="1"
        columnsL="1"
        columnsM="1"
        singleContainerFullSize="false"  
      >
        <f:toolbar>
          <m:Toolbar>
            <m:Title text="Special Instructions" />
            <m:Button id="mount" text="Mount models" />
            <m:Button id="unmount" text="Unmount models" />
          </m:Toolbar>
        </f:toolbar>
        <f:content>
          <m:Label text="Special instruction required" />
          <m:CheckBox selected="{viewState>/siRequired}" />
          <m:Label text="Special instruction acknowledged" />
          <m:CheckBox selected="{viewState>/siAcknowledged}" />
        </f:content>
      </f:SimpleForm>
      <mvc:XMLView
         id="control"
         viewName="myApp.view.control"
      />
   </m:VBox>
  </mvc:content>
</mvc:View>
`;

  view.placeAt('content');
});
  </script>
</html>
